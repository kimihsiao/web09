<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>AES Encrypt/Decrypt</title><meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"><style>.bd-placeholder-img{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media (min-width:768px){.bd-placeholder-img-lg{font-size:3.5rem}}.b-example-divider{width:100%;height:3rem;background-color:rgba(0,0,0,.1);border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em rgba(0,0,0,.1),inset 0 .125em .5em rgba(0,0,0,.15)}.b-example-vr{flex-shrink:0;width:1.5rem;height:100vh}.bi{vertical-align:-.125em;fill:currentColor}.nav-scroller{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller .nav{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.btn-bd-primary{--bd-violet-bg:#712cf9;--bd-violet-rgb:112.520718,44.062154,249.437846;--bs-btn-font-weight:600;--bs-btn-color:var(--bs-white);--bs-btn-bg:var(--bd-violet-bg);--bs-btn-border-color:var(--bd-violet-bg);--bs-btn-hover-color:var(--bs-white);--bs-btn-hover-bg:#6528e0;--bs-btn-hover-border-color:#6528e0;--bs-btn-focus-shadow-rgb:var(--bd-violet-rgb);--bs-btn-active-color:var(--bs-btn-hover-color);--bs-btn-active-bg:#5a23c8;--bs-btn-active-border-color:#5a23c8}.bd-mode-toggle{z-index:1500}.bd-mode-toggle .dropdown-menu .active .bi{display:block!important}.form-signin{max-width:630px;padding:1rem}</style></head><body class="d-flex align-items-center py-4 text-white bg-dark" style="height:100vh"><main class="form-signin w-100 m-auto"><form><h1 class="h3 mb-3 fw-normal">AES Encrypt/Decrypt</h1><div class="form-floating"><input type="text" id="key" value="#The3ncryp7Key" placeholder="nKey" class="form-control"> <label for="floatingInput">Key</label></div><div class="mb-3" style="min-height:24px"></div><div class="form-floating"><input type="text" id="plain" value="Hello World!" placeholder="Encrypt" class="form-control"> <label for="floatingPassword">Encrypt</label></div><button class="btn btn-primary py-2" type="button" onclick="encrypt()">Encrypt</button> <input type="text" class="form-control" id="encText"> <button type="button" class="btn btn-warning py-2 mb-3" id="encryptCopy">Copy</button><div class="form-floating"><input type="text" id="encrypted" value="QfKvmv2wlAMhqXYM1c5gzLcrf24x+qnMXIwHpNqO4Os=" placeholder="Decrypt" class="form-control"> <label for="floatingPassword">Decrypt</label></div><button class="btn btn-primary py-2" type="button" onclick="decrypt()">Decrypt</button> <input type="text" class="form-control" id="decText"> <button type="button" class="btn btn-warning py-2 mb-3" id="decryptCopy">Copy</button><p class="mt-5 mb-3 text-body-secondary text-center"><a href="https://blog.darkthread.net/blog/vanilla-js-aes-decryption/" class="text-white" target="_blank">ref.</a><span style="padding:0 5px"></span><a href="https://codepen.io/foxbeefly/pen/dyWbQgJ" class="text-white" target="_blank">ref.</a></p></form></main><script>window.crypto?.subtle || alert("Your browser is unsupported!"); async function createCryptoKey(a, b) { const c = await window.crypto.subtle.digest( "SHA-256", new TextEncoder().encode(a) ); let d = new Uint8Array(c.slice(0, 16)), e = new Uint8Array(c.slice(16)); const f = await window.crypto.subtle.importKey( "raw", d, { name: "AES-CBC" }, !1, [b] ); return { cryptoKey: f, ivPart: e }; } async function encryptData(a, b) { const { cryptoKey: c, ivPart: d } = await createCryptoKey(b, "encrypt"), e = new TextEncoder().encode(a), f = await window.crypto.subtle.encrypt( { name: "AES-CBC", iv: d }, c, e ), g = btoa(String.fromCharCode(...new Uint8Array(f))); return g; } async function decryptData(a, b) { const { cryptoKey: c, ivPart: d } = await createCryptoKey(b, "decrypt"), e = new Uint8Array( atob(a) .split("") .map((a) => a.charCodeAt(0)) ), f = await window.crypto.subtle.decrypt( { name: "AES-CBC", iv: d }, c, e ); return new TextDecoder().decode(f); } function encrypt() { const a = document.querySelector("#plain").value, b = document.querySelector("#key").value; encryptData(a, b).then( (a) => { (document.querySelector("#encrypted").value = a), (document.querySelector("#encText").value = a); }, (a) => { console.log(a); } ); } function decrypt() { const a = document.querySelector("#encrypted").value, b = document.querySelector("#key").value; decryptData(a, b) .then((a) => { document.querySelector("#decText").value = a; }) .catch((a) => { alert(a.message); }); } let copyText = document.querySelector(".form-signin"); copyText .querySelector("#encryptCopy") .addEventListener("click", function () { let input = copyText.querySelector("#encText"); input.select(); document.execCommand("copy"); copyText.classList.add("active"); window.getSelection().removeAllRanges(); setTimeout(function () { copyText.classList.remove("active"); }, 2500); }); copyText .querySelector("#decryptCopy") .addEventListener("click", function () { let input = copyText.querySelector("#decText"); input.select(); document.execCommand("copy"); copyText.classList.add("active"); window.getSelection().removeAllRanges(); setTimeout(function () { copyText.classList.remove("active"); }, 2500); });</script></body></html>